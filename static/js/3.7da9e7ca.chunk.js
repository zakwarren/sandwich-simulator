(this["webpackJsonpsandwich-simulator"]=this["webpackJsonpsandwich-simulator"]||[]).push([[3],{77:function(e,t,a){e.exports={Checkout:"Checkout_Checkout__3qQga"}},78:function(e,t,a){e.exports={CheckoutSummary:"CheckoutSummary_CheckoutSummary__HiZsT",Sandwich:"CheckoutSummary_Sandwich__3wVMT"}},79:function(e,t,a){e.exports={ContactData:"ContactData_ContactData__1-Rcq"}},80:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(13),r=a(4),c=a(77),l=a.n(c),u=a(78),d=a.n(u),s=a(47),m=a(17),h=function(e){return i.a.createElement("div",{className:d.a.CheckoutSummary},i.a.createElement("h1",null,"Clamp your pearly whites around this hasty, limp sandwich filled with MSG and your choice of ingredients!"),i.a.createElement("div",{className:d.a.Sandwich},i.a.createElement(s.a,{ingredients:e.ingredients})),i.a.createElement(m.a,{btnType:"Danger",clicked:e.checkoutCancelled},"Cancel"),i.a.createElement(m.a,{btnType:"Success",clicked:e.checkoutContinued},"Continue"))},p=a(29),v=a(9),f=a(79),g=a.n(f),y=a(26),b=a(46),C=a(3),k=a(43),w=a(6),E=Object(r.b)((function(e){return{ings:e.sandwichSimulator.ingredients,price:e.sandwichSimulator.totalPrice,loading:e.order.loading,error:e.order.error,token:e.auth.token,userId:e.auth.userId}}),(function(e){return{onOrder:function(t,a){return e(w.h(t,a))}}}))(Object(k.a)((function(e){var t=Object(n.useState)({name:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Name"},value:"",validation:{message:"Please enter your name",required:!0},valid:!1,touched:!1},email:{elementType:"input",elementConfig:{type:"email",placeholder:"Your Email"},value:"",validation:{message:"Please enter a valid email",required:!0,isEmail:!0},valid:!1,touched:!1},street:{elementType:"input",elementConfig:{type:"text",placeholder:"Street"},value:"",validation:{message:"Please enter a street",required:!0},valid:!1,touched:!1},postCode:{elementType:"input",elementConfig:{type:"text",placeholder:"Post Code"},value:"",validation:{message:"Please enter a valid post code",required:!0,minLength:5,maxLength:8},valid:!1,touched:!1},country:{elementType:"input",elementConfig:{type:"text",placeholder:"Country"},value:"",validation:{message:"Please enter a country",required:!0},valid:!1,touched:!1},deliveryMethod:{elementType:"select",elementConfig:{options:[{value:"fastest",displayValue:"Fastest"},{value:"cheapest",displayValue:"Cheapest"}]},value:"fastest",validation:{},valid:!0}}),a=Object(v.a)(t,2),o=a[0],r=a[1],c=Object(n.useState)(!1),l=Object(v.a)(c,2),u=l[0],d=l[1],s=Object(n.useState)(!1),h=Object(v.a)(s,2),f=h[0],k=h[1];Object(n.useEffect)((function(){"Notification"in window&&"serviceWorker"in navigator&&k(!0)}),[]);var w=function(){if("serviceWorker"in navigator){var e={body:"Thank you for your order. Your sandwich will be prepared soon.",data:{url:"http://localhost:3000/sandwich-simulator/"},badge:"/sandwich-simulator/logo192.png",icon:"/sandwich-simulator/logo192.png",image:"/sandwich-simulator/logo512.png",dir:"ltr",lang:"en-GB",vibrate:[100,50,200],tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"OK"},{action:"cancel",title:"Cancel"}]};navigator.serviceWorker.ready.then((function(t){t.showNotification("Sandwich ordered!",e)}))}},E=function(t){t.preventDefault(),Notification.requestPermission().then((function(e){"granted"===e&&w()}));var a={};for(var n in o)a[n]=o[n].value;var i={ingredients:Object(C.b)(e.ings),price:e.price,orderData:a,userId:e.userId};e.onOrder(i,e.token)},O=[];for(var S in o)O.push({id:S,config:o[S]});var j=i.a.createElement("div",{className:g.a.ContactData},i.a.createElement("h4",null,"Enter your contact details"),i.a.createElement("form",{onSubmit:E},O.map((function(e){return i.a.createElement(b.a,{key:e.id,elementType:e.config.elementType,elementConfig:e.config.elementConfig,value:e.config.value,touched:e.config.touched,shouldValidate:e.config.validation,invalid:!e.config.valid,errorMessage:e.config.validation?e.config.validation.message:null,changed:function(t){return function(e,t){var a=Object(C.c)(o[t],{value:e.target.value,valid:Object(C.a)(e.target.value,o[t].validation),touched:!0}),n=Object(C.c)(o,Object(p.a)({},t,a)),i=!0;for(var c in n)i=n[c].valid&&i;r(n),d(i)}(t,e.id)}})})),i.a.createElement(m.a,{btnType:"Success",clicked:E,disabled:!u},"Order"),f?i.a.createElement("p",null,"Please accept notifications to receive updates about your order"):null));return e.loading&&(j=i.a.createElement(y.a,null)),j})));t.default=Object(r.b)((function(e){return{ings:e.sandwichSimulator.ingredients,purchased:e.order.purchased}}))((function(e){var t=Object(C.b)(e.ings),a=i.a.createElement(o.a,{to:"/"});if(e.ings){var n=e.purchased?i.a.createElement(o.a,{to:"/"}):null;a=i.a.createElement("div",{className:l.a.Checkout},n,i.a.createElement(h,{ingredients:t,checkoutCancelled:function(){e.history.goBack()},checkoutContinued:function(){e.history.replace("/checkout/contact-data")}}),i.a.createElement(o.b,{path:e.match.path+"/contact-data",component:E}))}return a}))}}]);
//# sourceMappingURL=3.7da9e7ca.chunk.js.map